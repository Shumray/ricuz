# סיכום שינויים - עדכונים אחרונים

## תאריך: 31 ינואר 2026

---

## 🆕 עריכת מיפויים (גרסה 1.6.0)

### מה השתנה?
נוספה אפשרות **לערוך** מיפויים קיימים!

### איך זה עובד?
1. **טאב מיפוי קטגוריות** → כל שורה יש כפתור ✏️
2. **לחץ ✏️** → טופס עריכה נפתח
3. **שם הפריט**: מוצג אך לא ניתן לשינוי (readonly)
4. **קטגוריה**: ניתן לבחור קטגוריה חדשה
5. **שמור** → המיפוי מתעדכן!

### קוד שהשתנה:
```javascript
// הוספת כפתור עריכה לטבלה
row.innerHTML = `
    <td>${item}</td>
    <td><span class="category-badge">${category}</span></td>
    <td class="action-buttons">
        <button onclick="budgetSystem.editMapping('${item}', '${category}')" 
                class="btn btn-secondary btn-small" title="ערוך">✏️</button>
        <button onclick="budgetSystem.deleteMapping('${item}')" 
                class="btn btn-danger btn-small" title="מחק">🗑️</button>
    </td>
`;

// פונקציה חדשה
editMapping(item, category) {
    this.showMappingForm({ item, category });
}
```

### דוגמה:
```
לפני: "סופרסל" → "כלכלה"
עריכה: לחץ ✏️ → בחר "מזון"
אחרי: "סופרסל" → "מזון" ✓
```

---

## 💾 זכירת חודש נבחר (גרסה 1.5.0)

### מה עובד עכשיו?

#### 1️⃣ בחירת חודש במקום אחד בלבד
- בורר החודש בראש הטאב "📊 הזנת עסקאות" הוא המקום **היחיד** לבחירת חודש
- שדה החודש הוסר מטופס "עסקה חדשה"
- פשוט יותר, נקי יותר, פחות טעויות!

#### 2️⃣ החודש נשמר! 💾
כשבוחרים חודש בבורר העליון:
- ✅ המערכת שומרת את הבחירה ב-localStorage
- ✅ גם אם סוגרים את האתר
- ✅ גם אחרי שעות, ימים, שבועות
- ✅ בפתיחה הבאה - החודש שבחרת יהיה ברירת המחדל!

---

## דוגמת שימוש

### תרחיש A: שימוש רגיל באותו יום
```
09:00 - פותח את האתר → החודש הנוכחי (ינואר) נבחר אוטומטית
09:05 - משנה לפברואר → מוסיף עסקאות
10:00 - סוגר את האתר
11:00 - פותח את האתר → פברואר נבחר אוטומטית! ✨
```

### תרחיש B: שימוש אחרי זמן
```
יום ראשון:
  - בוחר "מרץ" בבורר
  - מוסיף עסקאות למרץ
  - סוגר את האתר

יום שני (למחרת):
  - פותח את האתר
  - מרץ נבחר אוטומטית! ✨
  - ממשיך להוסיף עסקאות למרץ

שבוע אחרי:
  - פותח את האתר
  - מרץ עדיין נבחר! ✨
```

---

## איך זה עובד מאחורי הקלעים?

### טכנית:
1. **שמירה**: כשמשנים את בורר החודש → `lastSelectedMonth` נשמר ב-localStorage
2. **טעינה**: כשפותחים את האתר → המערכת טוענת את `lastSelectedMonth`
3. **ברירת מחדל**: אם יש חודש שמור → משתמש בו, אחרת → חודש נוכחי

### קוד:
```javascript
// בעת שינוי החודש
document.getElementById('dataEntryMonthSelect').addEventListener('change', (e) => {
    const selectedValue = e.target.value;
    if (selectedValue && selectedValue !== 'all') {
        this.lastSelectedMonth = selectedValue;  // שמירה
        this.saveData();                         // שמירה ל-localStorage
    }
    this.updateTransactionsTable();
});

// בעת פתיחת האתר
setCurrentMonth() {
    const savedMonth = this.lastSelectedMonth;  // טעינה מ-localStorage
    const currentMonth = savedMonth || String(new Date().getMonth() + 1).padStart(2, '0');
    document.getElementById('dataEntryMonthSelect').value = currentMonth;  // הגדרת ברירת מחדל
}
```

---

## בדיקה עצמית

### כדי לבדוק שזה עובד:
1. ✅ פתח את האתר
2. ✅ שנה את בורר החודש לפברואר
3. ✅ **סגור לגמרי את הדפדפן** (לא רק את הטאב!)
4. ✅ פתח את האתר שוב
5. ✅ וודא שפברואר נבחר אוטומטית!

### אם זה לא עובד:
- בדוק ש-localStorage מופעל בדפדפן
- נקה את ה-cache ונסה שוב
- פתח את Developer Console (F12) וחפש שגיאות

---

## קבצים שהשתנו

### JavaScript (`budget.js`):
- ✅ `setCurrentMonth()` - משתמש ב-`lastSelectedMonth` אם קיים
- ✅ Event listener של `dataEntryMonthSelect` - שומר את החודש שנבחר
- ✅ `addTransaction()` - משתמש בחודש מהבורר העליון
- ✅ `showTransactionForm()` - הוסר הגדרת חודש בטופס

### HTML (`index.html`):
- ✅ הוסר שדה `<select id="month">` מטופס העסקה

### תיעוד:
- ✅ `USER_GUIDE.md` - עודכן עם הסבר על זכירת החודש
- ✅ `CHANGELOG.md` - עודכן עם התכונה החדשה

---

## תכונות נוספות שעובדות ביחד

1. **סינון טבלה** - הטבלה מציגה רק עסקאות של החודש הנבחר
2. **הוספת עסקאות** - עסקאות חדשות מתווספות לחודש הנבחר
3. **עריכת עסקאות** - עסקאות ישנות נשארות בחודש המקורי שלהן
4. **ייצוא/ייבוא** - החודש הנבחר נשמר גם בייצוא

---

**הכל עובד! המערכת זוכרת את הבחירות שלך! 🎉**

**גרסה**: 1.5.0  
**תאריך**: 31 ינואר 2026
